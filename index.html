<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Belajar Percabangan</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .custom-alert {
      position: absolute;
      background-color: #fef3c7;
      border: 1px solid #facc15;
      color: #78350f;
      padding: 8px 12px;
      border-radius: 6px;
      font-size: 0.9rem;
      z-index: 50;
      white-space: normal;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      max-width: 300px;
      animation: fadeIn 0.2s ease-in-out;
    }
    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(5px);}
      to {opacity: 1; transform: translateY(0);}
    }
    .sidebar-link {
            display: flex;
            align-items: center;
            padding: 0.5rem 1rem;
            border-radius: 9999px; /* Membuat bulatan */
            transition: background-color 0.3s ease, color 0.3s ease; /* Tambahkan transisi untuk warna teks */
            color: #0c5dd5; /* Warna teks default (abu-abu gelap) */
            z-index: 88;
        }

        .dark .sidebar-link {
            color: #0c5dd5; /* Warna teks dalam mode gelap (abu-abu terang) */
        }

        .sidebar-link::before {
            content: '';
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 0.5rem;
            background-color: transparent;
            transition: background-color 0.3s ease;
        }

        .sidebar-link.active::before {
            background-color: #990fd0; /* Warna bulatan saat aktif */
        }

        .sidebar-link.active {
            background-color: rgba(59, 130, 246, 0.1); /* Latar belakang saat aktif */
            color: #990fd0; /* Warna teks saat aktif */
        }

        .dark .sidebar-link.active {
            color: #93c5fd; /* Warna teks saat aktif dalam mode gelap */
        }


  </style>
</head>
<body class="bg-gray-100 p-4 relative">
  <div class="-mx-4">
    <nav id="navbar" class="bg-gray-800 p-4 fixed w-full z-10 top-0 transition-all duration-300">
      <div class="max-w-screen-xl mx-auto flex justify-between items-center">
        <!-- Logo -->
        <div class="text-white font-bold text-xl">
          <img src="images/logo.png" alt="Logo" class="w-10 h-10 transition-all duration-300" id="logo">
        </div>
    
        <!-- Mobile Menu Button -->
        <div class="md:hidden flex items-center">
          <button id="menu-toggle" class="text-white">
            <!-- Icon bisa ditaruh di sini -->
          </button>
        </div>
      </div>
    </nav>
    
  </div>
  
  <main class="space-y-6 mt-16 "></main>

  <aside class="fixed right-4 top-1/2 transform -translate-y-1/2 z-40 space-y-2">
    <a href="#if" class="sidebar-link" data-id="if">If</a>
    <a href="#ifelse" class="sidebar-link" data-id="ifElse">If-Else</a>
    <a href="#elseif" class="sidebar-link" data-id="elseIf">Else-If</a>
    <a href="#switch" class="sidebar-link" data-id="switch">Switch</a>
    <a href="#ternary" class="sidebar-link" data-id="ternary">Ternary</a>
  </aside>
  <!-- Custom alert element -->
  <div id="customAlert" class="custom-alert hidden"></div>

  <script>
document.addEventListener('DOMContentLoaded', function() {
  const sidebarLinks = document.querySelectorAll('.sidebar-link');

  // Variabel untuk melacak section yang aktif berdasarkan scroll
  let activeSection = '';

  // Fungsi untuk mengupdate link yang aktif berdasarkan scroll
  function updateActiveLink() {
    let currentSection = '';
    sidebarLinks.forEach(link => {
      const section = document.querySelector(link.getAttribute('href')); // Menggunakan href untuk menemukan elemen yang sesuai
      if (section && window.scrollY + window.innerHeight / 2 >= section.offsetTop) {
        currentSection = link.dataset.id;
      }
    });

    // Jika section aktif berubah, update class 'active'
    if (currentSection !== activeSection) {
      sidebarLinks.forEach(link => link.classList.remove('active'));
      const activeLink = document.querySelector(`[data-id="${currentSection}"]`);
      if (activeLink) {
        activeLink.classList.add('active');
      }
      activeSection = currentSection;
    }
  }

  // Update link aktif saat halaman dimuat
  sidebarLinks.forEach(link => {
    link.classList.remove('active');
    if (link.dataset.id === activeSection) {
      link.classList.add('active');
    }
  });

  // Panggil fungsi saat halaman di-scroll
  window.addEventListener('scroll', updateActiveLink);

  // Panggil fungsi saat halaman dimuat untuk pertama kali
  updateActiveLink();
});


    function updateCode(section) {
      const val = document.getElementById(`input${section}`).value;
      const num = parseInt(val) || 0;
      const inputField = document.getElementById(`input${section}`);
      const resultWrapper = document.getElementById(`resultWrapper${section}`);
      const result = document.getElementById(`result${section}`);
      const span = document.getElementById(`result${section}`);
      const javaCode = document.querySelector(`#${section.toLowerCase()} .lang-code.java`);
      const jsCode = document.querySelector(`#${section.toLowerCase()} .lang-code.js`);
      const phpCode = document.querySelector(`#${section.toLowerCase()} .lang-code.php`);

      let java = `int num = ${num};\n`;
      let js = `let num = ${num};\n`;
      let php = `$num = ${num};\n`;

      switch (section) {
        case 'If':
          java += `\nif (num > 0) {\n    System.out.println("Positif");\n}`;
          js += `\nif (num > 0) {\n  console.log("Positif");\n}`;
          php += `\nif ($num > 0) {\n    echo "Positif";\n}`;
          span.textContent = num > 0 ? "Positif" : "Undefined";
          break;
        case 'IfElse':
          java += `\nif (num > 0) {\n    System.out.println("Positif");\n} else {\n    System.out.println("Negatif atau Nol");\n}`;
          js += `\nif (num > 0) {\n  console.log("Positif");\n} else {\n  console.log("Negatif atau Nol");\n}`;
          php += `\nif ($num > 0) {\n    echo "Positif";\n} else {\n    echo "Negatif atau Nol";\n}`;
          span.textContent = num > 0 ? "Positif" : "Negatif atau Nol";
          break;
        case 'ElseIf':
          java += `\nif (num > 0) {\n    System.out.println("Positif");\n} else if (num < 0) {\n    System.out.println("Negatif");\n} else {\n    System.out.println("Nol");\n}`;
          js += `\nif (num > 0) {\n  console.log("Positif");\n} else if (num < 0) {\n  console.log("Negatif");\n} else {\n  console.log("Nol");\n}`;
          php += `\nif ($num > 0) {\n    echo "Positif";\n} elseif ($num < 0) {\n    echo "Negatif";\n} else {\n    echo "Nol";\n}`;
          span.textContent = num > 0 ? "Positif" : num < 0 ? "Negatif" : "Nol";
          break;
        case 'Switch':
          java += `\nswitch (num) {\n  case 1:\n    System.out.println("Satu");\n    break;\n  case 2:\n    System.out.println("Dua");\n    break;\n  case 3:\n    System.out.println("Tiga");\n    break;\n  default:\n    System.out.println("Diluar jangkauan");\n}`;
          js += `\nswitch(num) {\n  case 1:\n    console.log("Satu");\n    break;\n  case 2:\n    console.log("Dua");\n    break;\n  case 3:\n    console.log("Tiga");\n    break;\n  default:\n    console.log("Diluar jangkauan");\n}`;
          php += `\nswitch ($num) {\n  case 1:\n    echo "Satu";\n    break;\n  case 2:\n    echo "Dua";\n    break;\n  case 3:\n    echo "Tiga";\n    break;\n  default:\n    echo "Diluar jangkauan";\n}`;
          span.textContent = num === 1 ? "Satu" : num === 2 ? "Dua" : num === 3 ? "Tiga" : "Diluar jangkauan";
          break;
        case 'Ternary':
          java += `\nString result = (num > 0) ? "Positif" : "Negatif atau Nol";\nSystem.out.println(result);`;
          js += `\nlet result = (num > 0) ? "Positif" : "Negatif atau Nol";\nconsole.log(result);`;
          php += `\n$result = ($num > 0) ? "Positif" : "Negatif atau Nol";\necho $result;`;
          span.textContent = num > 0 ? "Positif" : "Negatif atau Nol";
          break;
      }

      javaCode.innerHTML = convertToClickable(java);
      jsCode.innerHTML = convertToClickable(js);
      phpCode.innerHTML = convertToClickable(php);
      if (inputField.value.trim() !== "") {
        resultWrapper.classList.remove("hidden");
        result.textContent = `Hasil : <span id="result${id}" class="font-semibold text-blue-600">-</span>`;
      } else {
        resultWrapper.classList.add("hidden");
      }

    }

    function switchLang(section, lang) {
      const container = document.getElementById(section.toLowerCase());
      container.querySelectorAll('.lang-code').forEach(el => el.classList.add('hidden'));
      container.querySelector(`.lang-code.${lang}`).classList.remove('hidden');
      container.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('bg-blue-500', 'text-white');
        btn.classList.add('bg-gray-300');
      });
      container.querySelector(`.tab-btn[data-lang="${lang}"]`).classList.remove('bg-gray-300');
      container.querySelector(`.tab-btn[data-lang="${lang}"]`).classList.add('bg-blue-500', 'text-white');
    }

    function convertToClickable(code) {
      const explanations = {
  'System\\.out\\.println': 'Menampilkan output dari kondisi code diatas.',
  'console\\.log': 'Menampilkan output dalam bahasa JavaScript.',
  'echo': 'Menampilkan output dalam bahasa php.',
  'if \\(.*\\)': 'Kondisi if ini bertujuan untuk mengecek num yang kamu inputkan lebih dari 0 atau tidak.',
  'else if': 'Kondisi tambahan jika if tidak terpenuhi.',
  'elseif': 'Kondisi tambahan di PHP jika if tidak terpenuhi.',
  'else': 'Kondisi terakhir jika semua kondisi sebelumnya tidak terpenuhi.',
  'switch': 'Struktur percabangan berdasarkan nilai.',
  'case': 'Kasus kondisi tertentu dalam switch.',
  'break': 'Menghentikan eksekusi dalam switch.',
  'default': 'Kasus default jika tidak ada yang cocok.',
  'int num': 'int num disini untuk mendeklarasikan angka yang di mau dilihat hasilnya dalam bahasa java.',
  'let num': 'let num disini untuk mendeklarasikan angka yang di mau dilihat hasilnya dalam bahasa javascript.',
  '\\$num(?!\\s*=)': '\\$num disini untuk digunakan dalam kondisi PHP.',
  '\\$num\\s*=': 'Deklarasi variabel $num di PHP.',
  'result = .*?;': 'Penugasan hasil menggunakan operator ternary untuk menunjukkan hasil akhirnya.',
  '}':'sebagai penutup atau akhir dari code atau kondisi'
};
      const lines = code.split('\n');
      return lines.map(line => {
        const explanation = Object.entries(explanations).find(([pattern]) => new RegExp(pattern).test(line));
        const text = explanation ? explanation[1] : '';
        const safeLine = line.replace(/</g, "&lt;").replace(/>/g, "&gt;");
        return `<div class="cursor-pointer hover:bg-gray-800 p-1 rounded relative text-sm font-mono" onclick="showAlert(event, '${text.replace(/'/g, "\\'")}')">${safeLine}</div>`;
      }).join('\n');
    }



    function showAlert(event, text) {
      const alertBox = document.getElementById('customAlert');
      alertBox.textContent = text;
      alertBox.classList.remove('hidden');

      const rect = event.target.getBoundingClientRect();
      alertBox.style.top = `${window.scrollY + rect.top - alertBox.offsetHeight - 8}px`;
      alertBox.style.left = `${rect.left}px`;

      clearTimeout(alertBox.timeout);
      alertBox.timeout = setTimeout(() => {
        alertBox.classList.add('hidden');
      }, 2000);
    }

    // Scroll effect for navbar
window.onscroll = function() {shrinkNavbar()};

function shrinkNavbar() {
  const navbar = document.getElementById("navbar");
  if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
    navbar.classList.add("bg-gray-700", "p-2");
    navbar.classList.remove("p-4");
  } else {
    navbar.classList.remove("bg-gray-700", "p-2");
    navbar.classList.add("p-4");
  }
}

// Mobile menu toggle
document.getElementById('menu-toggle').addEventListener('click', function() {
  const mobileMenu = document.getElementById('mobile-menu');
  if (mobileMenu.style.display === 'block') {
    mobileMenu.style.display = 'none';
  } else {
    mobileMenu.style.display = 'block';
  }
});


    document.addEventListener("DOMContentLoaded", () => {
      const main = document.querySelector("main");
      const sections = [
        { id: 'If', title: '1. IF' },
        { id: 'IfElse', title: '2. IF ELSE' },
        { id: 'ElseIf', title: '3. ELSE IF' },
        { id: 'Switch', title: '4. SWITCH CASE' },
        { id: 'Ternary', title: '5. Ternary Operator' }
      ];
      sections.forEach(({ id, title }) => {
        const lower = id.toLowerCase();
        main.insertAdjacentHTML("beforeend", `
          <section id="${lower}" class="bg-white p-6 rounded shadow">
            <h2 class="text-lg font-bold mb-2">${title}</h2>
            <div class="flex flex-col md:flex-row gap-4">
      <div class="md:w-1/2 p-4 bg-white rounded-lg shadow-md">
  <label class="block text-lg font-semibold mb-2 text-gray-800">Masukkan angka:</label>
  <input id="input${id}" type="number" class="w-full border-2 border-gray-300 rounded-lg p-3 text-gray-800 focus:ring-2 focus:ring-blue-500 focus:outline-none transition duration-300" oninput="updateCode('${id}')"/>
  <p id="resultWrapper${id}" class="mt-4 text-gray-700 hidden">Hasil: <span id="result${id}" class="font-semibold text-blue-600">-</span></p>
</div>

              <div class="md:w-1/2">
                <div class="mb-2 flex space-x-2">
                  <button onclick="switchLang('${id}', 'java')" data-lang="java" class="tab-btn bg-blue-500 text-white px-2 py-1 rounded text-sm">Java</button>
                  <button onclick="switchLang('${id}', 'js')" data-lang="js" class="tab-btn bg-gray-300 px-2 py-1 rounded text-sm">JavaScript</button>
                  <button onclick="switchLang('${id}', 'php')" data-lang="php" class="tab-btn bg-gray-300 px-2 py-1 rounded text-sm">PHP</button>
                </div>
                <div class="bg-gray-900 text-green-400 p-3 rounded overflow-auto max-h-60">
                  <div class="lang-code java"></div>
                  <div class="lang-code js hidden"></div>
                  <div class="lang-code php hidden"></div>
                </div>
              </div>
            </div>
          </section>
        `);
        updateCode(id);
      });
    });
  </script>
</body>
</html>
